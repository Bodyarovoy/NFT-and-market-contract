есть список сминченых нфт в которых есть id
создатель коллекции

Запустить лотерею


Struct lottery{
id: LotteryId,
lottery_token_id: AccountId,
lottery_status: LotteryStatus,
entries: Vec<AccountId>, //AccountId from nft-contract - series.rs - nft_mint
winner: Option<AccountId>, 
message_for_winner: String,
}



fn new

   fn get_accounts_num(&self) -> u32 {
self.entries.len() as _
}



fn is_finished(&self) -> bool {
    self.lottery_status == LotteryStatus::Finished && self.is_pools_equal() && self.winner.is_some()
}

pub fn assert_is_finished(&self) {
self.assert_equals_pool();
assert!(self.winner.is_some());
} 

fn set_winner(&mut self) {
    let total_entries = self.get_accounts_num();
    let index = get_range_random_number(0, total_entries);
    let winner = &self.entries[index];
   
    self.winner = Some(winner.clone());
}


pub fn get_winner_unwrap(&self) -> AccountId {
    match &self.winner {
        Some(winner) => winner.clone(),
        None => panic!("Lottery has no winner"),
}
}














